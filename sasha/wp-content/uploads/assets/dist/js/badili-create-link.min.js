app.controller('createLinkCtrl', function ($scope,$rootScope) {

    //enable jquery validate for this form now that its data is loaded
    $scope.enableLinkFormValidate();
    $scope.createLink = function () {

        //$scope.post_content = $('#create_post_ifr').contents().find("body").html();

        if ($("#LinkDetailsForm").valid()) {
            var data = {
                action: "create_my_link",
                post_title: $scope.post_title,
                link_url: $scope.link_url,
                topics: JSON.stringify($rootScope.final_topics),
                topics_tax: JSON.stringify($rootScope.topics_tax),
            };

            //alert(data);
            //console.log(data);

            $scope.send_ajax_request(data, function (response) {
                if (response.status == "success") {
                    $scope.post_title = "";
                    $scope.link_url = "";
                   // $('#create_post_ifr').contents().find("body").html("");

                    $scope.safeApply();

                    window.location.href = response.url;
                }
            }, function (error) {
                console.log("Error", error);
            });
        }

    };
});